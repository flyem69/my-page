{"version":3,"sources":["../node_modules/peerjs/dist sync","Context.js","components/switch/Switch.js","components/header/Header.js","images/fuel_canister.svg","images/gamepad.svg","images/streaming.svg","components/home/Home.js","components/smallInput/SmallInput.js","components/fuel/Fuel.js","images/refresh.svg","components/streams/Streams.js","components/stream/Stream.js","Router.js","components/app/App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Context","React","createContext","socket","io","peer","Peer","ContextProvider","children","useState","getDarkMode","setDarkMode","isSocketConn","setSocketConn","isPeerConn","setPeerConn","isStreamService","setStreamService","getStream","setStream","useEffect","on","Provider","value","startStream","stream","userId","call","console","log","emit","getVideoTracks","addEventListener","off","joinStream","streamSocket","streamHandler","answer","remoteStream","leaveStream","Switch","props","useContext","position","switchPosition","callback","switchCallback","appearance","thumbPosition","className","onClick","style","left","Header","switchProps","darkMode","Home","to","src","FuelImage","alt","Gamepad","Streaming","SmallInput","validity","validityState","valueState","getValue","setValue","placeholder","onChange","event","input","target","regex","test","modify","onFocus","Fuel","isBtnLock","setBtnLock","values","lapTimeMin","lapTimeS","lapTimeMS","fuelPerLap","raceLength","fuelPer100","distance","result","validities","lapTime","lapTimeMinProps","lapTimeSProps","lapTimeMSProps","fuelPerLapProps","raceLengthProps","fuelPer100Props","distanceProps","setResultSmoothly","getResult","setResult","resultValue","substring","length","isNaN","interpolateResult","valueGap","timeGap","Math","abs","currentValue","targetValue","obj","setTimeout","setStateCallbacks","push","forEach","setStateCallback","fuel","ceil","Streams","getStreamList","setStreamList","isRefreshing","setRefreshing","availableStreams","animation","streamList","map","streamId","fetchStreams","startTime","Date","now","fetch","window","location","protocol","host","then","res","remainingAnimationTime","json","array","err","navigator","mediaDevices","getDisplayMedia","video","audio","Refresh","Stream","isStreamRunning","setStreamRunning","useParams","videoRef","useRef","current","srcObject","ref","autoPlay","controls","playsInline","muted","Router","exact","path","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.127fca6c.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 52;","import React from 'react'\r\nimport { io } from 'socket.io-client'\r\nimport Peer from 'peerjs'\r\n\r\nconst Context = React.createContext()\r\n\r\nconst socket = io()\r\nconst peer = new Peer()\r\n\r\nconst ContextProvider = ({children}) => {\r\n    const [getDarkMode, setDarkMode] = React.useState(true)\r\n    const [isSocketConn, setSocketConn] = React.useState(false)\r\n    const [isPeerConn, setPeerConn] = React.useState(false)\r\n    const [isStreamService, setStreamService] = React.useState(false)\r\n    const [getStream, setStream] = React.useState(null)\r\n\r\n    React.useEffect(() => {\r\n        if (isSocketConn && isPeerConn) {\r\n            setStreamService(true)\r\n        } else {\r\n            setStreamService(false)\r\n        }\r\n    }, [isSocketConn, isPeerConn])\r\n\r\n    socket.on('connect', () => {\r\n        setSocketConn(true)\r\n    })\r\n    peer.on('open', id => {\r\n        setPeerConn(true)\r\n    })\r\n    socket.on('disconnect', () => {\r\n        setSocketConn(false)\r\n    })\r\n    peer.on('disconnected', () => {\r\n        setPeerConn(false)\r\n    })\r\n\r\n    function startStream(stream) {\r\n        setStream(stream)\r\n        socket.on('viewerJoining', userId => {\r\n            peer.call(userId, stream)\r\n            console.log(`User ${userId} joined`)\r\n        })\r\n        socket.on('viewerLeaving', userId => {\r\n            console.log(`User ${userId} left`)\r\n        })\r\n        socket.emit('registerStream')\r\n        stream.getVideoTracks()[0].addEventListener('ended', () => {\r\n            socket.emit('deregisterStream')\r\n            socket.off('viewerJoining')\r\n            socket.off('viewerLeaving')\r\n            setStream(null)\r\n        })\r\n    }\r\n\r\n    function joinStream(streamSocket, streamHandler) {\r\n        if (socket.id === streamSocket) {\r\n            streamHandler(getStream)\r\n        } else {\r\n            socket.on('viewerJoining', userId => {\r\n                console.log(`User ${userId} joined`)\r\n            })\r\n            socket.on('viewerLeaving', userId => {\r\n                console.log(`User ${userId} left`)\r\n            })\r\n            peer.on('call', call => {\r\n                call.answer()\r\n                call.on('stream', remoteStream => {\r\n                    streamHandler(remoteStream)\r\n                })\r\n            })\r\n        }\r\n        socket.emit('joinStream', streamSocket, peer.id)\r\n    }\r\n\r\n    function leaveStream(streamSocket) {\r\n        if (socket.id !== streamSocket) {\r\n            socket.off('viewerJoining')\r\n            socket.off('viewerLeaving')\r\n            peer.off('call')\r\n        }\r\n        socket.emit('leaveStream', streamSocket, peer.id)\r\n    }\r\n\r\n    return (\r\n        <Context.Provider value={{\r\n            getDarkMode,\r\n            setDarkMode,\r\n            isStreamService,\r\n            startStream,\r\n            joinStream,\r\n            leaveStream\r\n        }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n}\r\n\r\nexport { ContextProvider, Context }\r\n","import React from 'react'\r\nimport './Switch.css'\r\nimport { Context } from '../../Context.js'\r\n\r\nexport default function Switch({props}) {\r\n    const {getDarkMode} = React.useContext(Context)\r\n    const position = props.switchPosition\r\n    const callback = props.switchCallback\r\n    const appearance = getDarkMode ? 'dark' : 'light'\r\n    const thumbPosition = position ? '50%' : '0%'\r\n    return (\r\n        <div\r\n            className={`Switch ${appearance}`}\r\n            onClick={callback}\r\n        >\r\n            <div\r\n                className='Switch-thumb'\r\n                style={{left: thumbPosition}}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Switch from '../switch/Switch.js'\r\nimport './Header.css'\r\nimport { Context } from '../../Context.js'\r\n\r\nexport default function Header() {\r\n    const {getDarkMode, setDarkMode} = React.useContext(Context)\r\n    const appearance = getDarkMode ? 'dark' : 'light'\r\n    const switchProps = {\r\n        switchPosition: getDarkMode,\r\n        switchCallback: () => {\r\n            setDarkMode(darkMode => !darkMode)\r\n        }\r\n    }\r\n    return (\r\n        <div className={`Header ${appearance}`}>\r\n            <div className='Header-switch'>\r\n                <Switch props={switchProps}/>\r\n            </div>\r\n            <div className='Header-switchLabel'>\r\n                Dark mode\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/fuel_canister.03fd969a.svg\";","export default __webpack_public_path__ + \"static/media/gamepad.b51cff24.svg\";","export default __webpack_public_path__ + \"static/media/streaming.ae753636.svg\";","import React from 'react'\r\nimport './Home.css'\r\nimport FuelImage from '../../images/fuel_canister.svg'\r\nimport Gamepad from '../../images/gamepad.svg'\r\nimport Streaming from '../../images/streaming.svg'\r\nimport { Link } from 'react-router-dom'\r\nimport { Context } from '../../Context.js'\r\n\r\nexport default function Home() {\r\n    const {getDarkMode} = React.useContext(Context)\r\n    const appearance = getDarkMode ? 'dark' : 'light'\r\n    return (\r\n        <div className='Home-grid'>\r\n            <Link to='/fuel'>\r\n                <img\r\n                    src={FuelImage}\r\n                    className={`Home-item ${appearance}`}\r\n                    alt='fuelImage'\r\n                />\r\n            </Link>\r\n            <img\r\n                src={Gamepad}\r\n                className={`Home-item ${appearance}`}\r\n                alt='gamepad'\r\n            />\r\n            <Link to='/streams'>\r\n                <img\r\n                    src={Streaming}\r\n                    className={`Home-item ${appearance}`}\r\n                    alt='streaming'\r\n                />\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './SmallInput.css'\r\nimport {Context} from '../../Context.js'\r\n\r\nexport default function SmallInput({props}) {\r\n    const {getDarkMode} = React.useContext(Context)\r\n    const appearance = getDarkMode ? 'dark' : 'light'\r\n    const validity = props.validityState[0] ? 'valid' : 'invalid'\r\n    const [getValue, setValue] = props.valueState\r\n\r\n    function modify(event) {\r\n        const input = event.target.value\r\n        if ('regex' in props) {\r\n            if (props.regex.test(input))\r\n                setValue(input)\r\n        } else {\r\n            setValue(input)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <input\r\n            className={`SmallInput ${appearance} ${validity}`}\r\n            placeholder={props.placeholder}\r\n            value={getValue}\r\n            onChange={(e) => {modify(e)}}\r\n            onFocus={props.onClick} />\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './Fuel.css'\r\nimport SmallInput from '../smallInput/SmallInput.js'\r\nimport {Context} from '../../Context.js'\r\n\r\nexport default function Fuel() {\r\n    const {getDarkMode} = React.useContext(Context)\r\n    const appearance = getDarkMode ? 'dark' : 'light'\r\n    const [isBtnLock, setBtnLock] = React.useState(false)\r\n    const values = {\r\n        lapTimeMin: React.useState(''),\r\n        lapTimeS: React.useState(''),\r\n        lapTimeMS: React.useState(''),\r\n        fuelPerLap: React.useState(''),\r\n        raceLength: React.useState(''),\r\n        fuelPer100: React.useState(''),\r\n        distance: React.useState(''),\r\n        result: React.useState('')\r\n    }\r\n    const validities = {\r\n        lapTime: React.useState(true),\r\n        fuelPerLap: React.useState(true),\r\n        raceLength: React.useState(true),\r\n        fuelPer100: React.useState(true),\r\n        distance: React.useState(true)\r\n    }\r\n    const lapTimeMinProps = {\r\n        'valueState': values.lapTimeMin,\r\n        'validityState': validities.lapTime,\r\n        'placeholder': 'min',\r\n        'onClick': () => {validities.lapTime[1](true)},\r\n        'regex': /^\\d{0,2}$/\r\n    }\r\n    const lapTimeSProps = {\r\n        'valueState': values.lapTimeS,\r\n        'validityState': validities.lapTime,\r\n        'placeholder': 's',\r\n        'onClick': () => {validities.lapTime[1](true)},\r\n        'regex': /^[0-5]?[0-9]?$/\r\n    }\r\n    const lapTimeMSProps = {\r\n        'valueState': values.lapTimeMS,\r\n        'validityState': validities.lapTime,\r\n        'placeholder': 'ms',\r\n        'onClick': () => {validities.lapTime[1](true)},\r\n        'regex': /^[0-5]?[0-9]?$/\r\n    }\r\n    const fuelPerLapProps = {\r\n        'valueState': values.fuelPerLap,\r\n        'validityState': validities.fuelPerLap,\r\n        'placeholder': 'l',\r\n        'onClick': () => {validities.fuelPerLap[1](true)},\r\n        'regex': /^(\\d{0,2}|\\d{1,2}\\.\\d?)$/\r\n    }\r\n    const raceLengthProps = {\r\n        'valueState': values.raceLength,\r\n        'validityState': validities.raceLength,\r\n        'placeholder': 'min',\r\n        'onClick': () => {validities.raceLength[1](true)},\r\n        'regex': /^\\d{0,4}$/\r\n    }\r\n    const fuelPer100Props = {\r\n        'valueState': values.fuelPer100,\r\n        'validityState': validities.fuelPer100,\r\n        'placeholder': 'l',\r\n        'onClick': () => {validities.fuelPer100[1](true)},\r\n        'regex': /^(\\d{0,2}|\\d{1,2}\\.\\d?)$/\r\n    }\r\n    const distanceProps = {\r\n        'valueState': values.distance,\r\n        'validityState': validities.distance,\r\n        'placeholder': 'km',\r\n        'onClick': () => {validities.distance[1](true)},\r\n        'regex': /^\\d{0,4}$/\r\n    }\r\n\r\n    function calcRaceFuel() {\r\n        if (isBtnLock)\r\n            return\r\n        let lapTime = values.lapTimeMin[0] * 1 * 60000\r\n        lapTime += values.lapTimeS[0] * 1 * 1000\r\n        lapTime += values.lapTimeMS[0] * 1\r\n        const fuelPerLap = values.fuelPerLap[0] * 1\r\n        const raceLength = values.raceLength[0] * 60000\r\n\r\n        const setStateCallbacks = []\r\n        if (lapTime === 0) {\r\n            setStateCallbacks.push(validities.lapTime[1])\r\n        }\r\n        if (fuelPerLap === 0) {\r\n            setStateCallbacks.push(validities.fuelPerLap[1])\r\n        }\r\n        if (raceLength === 0) {\r\n            setStateCallbacks.push(validities.raceLength[1])\r\n        }\r\n        if (setStateCallbacks.length > 0) {\r\n            setStateCallbacks.forEach(setStateCallback => {\r\n                setStateCallback(false)\r\n            });\r\n            return\r\n        }\r\n\r\n        const laps = raceLength / lapTime\r\n        let fuel = fuelPerLap * laps\r\n        fuel = Math.ceil(fuel)\r\n        setResultSmoothly(fuel)\r\n    }\r\n\r\n    function calcRoadFuel() {\r\n        if (isBtnLock)\r\n            return\r\n        const fuelPer100 = values.fuelPer100[0] * 1\r\n        const distance = values.distance[0] * 1\r\n\r\n        const setStateCallbacks = []\r\n        if (fuelPer100 === 0) {\r\n            setStateCallbacks.push(validities.fuelPer100[1])\r\n        }\r\n        if (distance === 0) {\r\n            setStateCallbacks.push(validities.distance[1])\r\n        }\r\n        if (setStateCallbacks.length > 0) {\r\n            setStateCallbacks.forEach(setStateCallback => {\r\n                setStateCallback(false)\r\n            });\r\n            return\r\n        }\r\n\r\n        const distancePer100 = distance / 100\r\n        let fuel = fuelPer100 * distancePer100\r\n        fuel = Math.ceil(fuel)\r\n        setResultSmoothly(fuel)\r\n    }\r\n\r\n    function setResultSmoothly(value) {\r\n        setBtnLock(true)\r\n        const [getResult, setResult] = values.result\r\n        let resultValue = getResult.substring(0, getResult.length - 2)\r\n        if (isNaN(resultValue)) {\r\n            resultValue = 0\r\n            setResult(resultValue + ' l')\r\n        }\r\n        else {\r\n            resultValue *= 1\r\n        }\r\n        const interpolationDataObj = {\r\n            valueGap: value > resultValue ? 1 : -1,\r\n            timeGap: 500 / Math.abs(resultValue - value),\r\n            currentValue: resultValue,\r\n            targetValue: value\r\n        }\r\n        interpolateResult(interpolationDataObj)\r\n    }\r\n\r\n    function interpolateResult(obj) {\r\n        const setResult = values.result[1]\r\n        if (obj.currentValue === obj.targetValue) {\r\n            setBtnLock(false)\r\n            return\r\n        }\r\n        setTimeout(() => {\r\n            obj.currentValue += obj.valueGap\r\n            setResult(obj.currentValue + ' l')\r\n            interpolateResult(obj)\r\n        }, obj.timeGap)\r\n    }\r\n\r\n    return (\r\n        <div className='Fuel-grid'>\r\n            <div className='Fuel-category-grid x0 y0'>\r\n                <div className='x0 y0 align-right'>\r\n                    Lap time\r\n                </div>\r\n                <div className='x1 y0'>\r\n                    <SmallInput props={lapTimeMinProps}/>\r\n                </div>\r\n                <div className='x2 y0'>\r\n                    <SmallInput props={lapTimeSProps}/>\r\n                </div>\r\n                <div className='x3 y0'>\r\n                    <SmallInput props={lapTimeMSProps}/>\r\n                </div>\r\n                <div className='x0 y1 align-right'>\r\n                    Fuel per lap\r\n                </div>\r\n                <div className='x1 y1'>\r\n                    <SmallInput props={fuelPerLapProps}/>\r\n                </div>\r\n                <div className='x0 y2 align-right'>\r\n                    Race length\r\n                </div>\r\n                <div className='x1 y2'>\r\n                    <SmallInput props={raceLengthProps}/>\r\n                </div>\r\n                <div className='x03 y3'>\r\n                    <div className={`button ${appearance}`} onClick={calcRaceFuel}>\r\n                        Calculate race fuel\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='Fuel-category-grid x1 y0'>\r\n                <div className='x0 y0 align-right'>\r\n                    Fuel per 100 km\r\n                </div>\r\n                <div className='x1 y0'>\r\n                    <SmallInput props={fuelPer100Props}/>\r\n                </div>\r\n                <div className='x0 y1 align-right'>\r\n                    Distance\r\n                </div>\r\n                <div className='x1 y1'>\r\n                    <SmallInput props={distanceProps}/>\r\n                </div>\r\n                <div className='x01 y2'>\r\n                    <div className={`button ${appearance}`} onClick={calcRoadFuel}>\r\n                        Calculate road fuel\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='Fuel-result x01 y1'>\r\n                {values.result[0]}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/refresh.4570377c.svg\";","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport './Streams.css'\r\nimport { Context } from '../../Context.js'\r\nimport Refresh from '../../images/refresh.svg'\r\n\r\nexport default function Streams() {\r\n    const { getDarkMode, isStreamService, startStream } = React.useContext(Context)\r\n    const [getStreamList, setStreamList] = React.useState([])\r\n    const [isRefreshing, setRefreshing] = React.useState(false)\r\n    const appearance = getDarkMode ? 'dark' : 'light'\r\n    const availableStreams = isStreamService ? getStreamList.length : 'No service'\r\n    const animation = isRefreshing ? 'rotating' : 'still'\r\n    const streamList = getStreamList.map(streamId => {\r\n      return (\r\n        <Link to={`/stream/${streamId}`}>\r\n          <div key={streamId}>\r\n            {streamId}\r\n          </div>\r\n        </Link>\r\n      )\r\n    })\r\n\r\n    React.useEffect(() => {\r\n      if (isStreamService)\r\n        fetchStreams()\r\n    }, [isStreamService])\r\n\r\n    function refresh() {\r\n      if (isStreamService && !isRefreshing)\r\n        fetchStreams()\r\n    }\r\n\r\n    function fetchStreams() {\r\n      const startTime = Date.now()\r\n      setRefreshing(true)\r\n      fetch(window.location.protocol + '//' + window.location.host + '/api/streams')\r\n        .then(res => {\r\n          const remainingAnimationTime = 1000 - ((Date.now() - startTime) % 1000)\r\n          setTimeout(() => {\r\n            setRefreshing(false)\r\n          }, remainingAnimationTime)\r\n          return res.json()\r\n        })\r\n        .then(array => {\r\n          setStreamList(array)\r\n        }, err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n\r\n    function setupStream() {\r\n      if (isStreamService) {\r\n        navigator.mediaDevices.getDisplayMedia({\r\n          video: true,\r\n          audio: true\r\n        }).then(stream => {\r\n          startStream(stream)\r\n        }, err => {\r\n          console.log(err)\r\n        })\r\n      }\r\n    }\r\n\r\n    return (\r\n        <div className='Streams-grid'>\r\n            <div className='Streams-header'>Streams</div>\r\n            <div className={`Streams-separator ${appearance}`}></div>\r\n            <div\r\n              className={`button ${appearance}`}\r\n              onClick={setupStream}>\r\n                Start stream\r\n            </div>\r\n            <div className='Streams-available'>\r\n              Available streams: {availableStreams}\r\n              <img \r\n                src={Refresh}\r\n                className={`Streams-refresh ${animation} ${appearance}`}\r\n                alt='refresh'\r\n                onClick={refresh}\r\n              />\r\n            </div>\r\n            <div className='Streams-available-grid'>{streamList}</div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useParams } from 'react-router'\r\nimport './Stream.css'\r\nimport { Context } from '../../Context.js'\r\n\r\nexport default function Stream() {\r\n    const { joinStream, leaveStream, isStreamService } = React.useContext(Context)\r\n    const [isStreamRunning, setStreamRunning] = React.useState(false)\r\n    const { id } = useParams()\r\n    const videoRef = React.useRef()\r\n\r\n    React.useEffect(() => {\r\n        if (isStreamService && !isStreamRunning) {\r\n            joinStream(id, stream => {\r\n                videoRef.current.srcObject = stream\r\n            })\r\n            setStreamRunning(true)\r\n        }\r\n        return () => {\r\n            if (isStreamRunning) {\r\n                leaveStream(id)\r\n            }\r\n        }\r\n    }, [isStreamService, isStreamRunning])\r\n\r\n    return (\r\n        <video\r\n            className='player'\r\n            ref={videoRef}\r\n            autoPlay\r\n            controls\r\n            playsInline\r\n            muted\r\n        >\r\n        </video>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Switch, Route, BrowserRouter } from 'react-router-dom'\r\nimport Home from './components/home/Home.js'\r\nimport Fuel from './components/fuel/Fuel.js'\r\nimport Streams from './components/streams/Streams.js'\r\nimport Stream from './components/stream/Stream.js'\r\n\r\nexport default function Router() {\r\n    return (\r\n        <BrowserRouter>\r\n            <Switch>\r\n                <Route exact path='/'>\r\n                    <Home />\r\n                </Route>\r\n                <Route exact path='/fuel'>\r\n                    <Fuel />\r\n                </Route>\r\n                <Route exact path='/streams'>\r\n                    <Streams />\r\n                </Route>\r\n                <Route exact path='/stream/:id'>\r\n                    <Stream />\r\n                </Route>\r\n            </Switch>\r\n        </BrowserRouter>\r\n    )\r\n}\r\n","import React from 'react';\nimport './App.css';\nimport Header from '../header/Header.js'\nimport Router from '../../Router.js';\nimport { Context } from '../../Context.js'\n\nfunction App() {\n  const {getDarkMode} = React.useContext(Context)\n  const appearance = getDarkMode ? 'dark' : 'light'\n  return (\n    <>\n      <Header/>\n      <div className={`App-content ${appearance}`}>\n        <Router/>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './components/app/App.js'\nimport { ContextProvider } from './Context.js'\n\nReactDOM.render(\n    <ContextProvider>\n        <App />\n    </ContextProvider>, \n    document.getElementById('root')\n)\n"],"sourceRoot":""}